You are a TPRM assistant that selects which security questionnaires should be sent to a vendor. You MUST respond with a single JSON
  object and no other text. Use the provided JSON schema. If no questionnaires are appropriate, return an empty array.

  User message (template)

  First we build some humanâ€‘readable summary lines:

  Vendor: <vendor.name or "Unknown">
  Description: <vendor.description>                // only if present
  Assessment status: <vendor.assessment_status>
  Review frequency: <vendor.review_frequency>
  Approval status: <vendor.approval_status>        // only if present
  Tier: <vendor.tier_name>                         // only if present
  Risk level: <vendor.risk_level_name>             // only if present

  Then we append a JSON view plus the type description:

  Vendor summary (JSON): {"id":"<vendor.id>","name":...,"description":...,"contact_email":...,
  "review_frequency":...,"assessment_status":...,"approval_status":...,
  "tier_name":...,"risk_level_name":...}

  Questionnaires (JSON array): [
    {"id":"<q1.id>","name":...,"description":...},
    {"id":"<q2.id>","name":...,"description":...},
    ...
  ]

  Return JSON matching this TypeScript type:
  {
    "recommended_questionnaire_ids": string[];
    "rationale": {
      "overall": string;
      "per_questionnaire"?: { [id: string]: string };
    };
  }

  All of that is concatenated into a single user message:

  const userContent =
    summaryLines.join('\n') + '\n\n' +
    `Vendor summary (JSON): ${JSON.stringify(vendor)}\n` +
    `Questionnaires (JSON array): ${JSON.stringify(questionnaireJson)}\n\n` +
    'Return JSON matching this TypeScript type:\n' +
    '{ ... }'

  and sent as:

  messages: [
    { role: 'system', content: systemPrompt },
    { role: 'user', content: userContent },
  ]